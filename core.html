<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expense Tracker</title>
    <style>
        body {
           background: linear-gradient(135deg, #000428, #004e92);
           background-size: 300% 300%;
           animation: glowingGradient 12s ease infinite;
           color: rgb(0, 0, 0);
           margin: 0;
           padding: 0;
            font-family: '', sans-serif;
        }

        @keyframes glowingGradient {
        0% {
           background-position: 0% 50%;
        }
        50% {
           background-position: 100% 50%;
        }
        100% {
        background-position: 0% 50%;
        }
        }


        .appbar {
            color: white;
            height: 70px;
            background: linear-gradient(45deg, #000000, #2575fc);
            box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.3);
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background 0.3s ease, transform 0.2s ease;
        }
        .appbar:hover {
            background: linear-gradient(45deg, #2575fc, #000000);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
            transform: translateY(-2px);
        }

        .main {
            display: flex;
            flex-direction: row;
            margin-top: 20px;
            margin-bottom: 10px;
            margin-right: 50px;
            gap: 30px;
            padding: 20px;
            justify-content: space-between;
            width: 90%;
        }
        .left {
            background: rgba(255, 255, 255, 0.059); /* Transparent background */
            padding: 20px;
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 2px solid rgba(255, 255, 255, 0.2); /* Light border for glass effect */
            backdrop-filter: blur(12px); /* Adds the blur effect behind the element */
            -webkit-backdrop-filter: blur(12px); /* Safari support */
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); /* Light shadow */
            color: #ffffff;
        }

        .left:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2); /* Enhanced shadow on hover */
        }


        .right {
            background: rgba(255, 255, 255, 0.365); /* Transparent background */
            max-height: fit-content;
            padding: 10px;
            border-radius: 12px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 2px solid rgba(255, 255, 255, 0.2); /* Light border for glass effect */
            backdrop-filter: blur(12px); /* Adds the blur effect behind the element */
            -webkit-backdrop-filter: blur(12px); /* Safari support */
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); /* Light shadow */
        }

        .right:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2); /* Enhanced shadow on hover */
        }

        #greeting {
            margin-top: 0;
        }

        .balance {
            display: flex;
            gap: 16px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .card-balance {
            border-radius: 8px;
            flex: 1;
            background-color: rgba(255, 255, 255, 0.521);
            padding: 10px;
            text-align: center;
            box-sizing: border-box;
            justify-content: center;
            align-items: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            color: #000000;
        }

        .card-balance:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }
        .form-balance {
            display: flex;
            flex-direction: column;
            gap: 16px;
            flex: 1;
            background-color: #ffffff;
            border-radius: 8px;
            padding: 30px;
            box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);
        }
        .form-balance input {
            width: 100%;
            height: 30px;
            background-color: transparent;
            outline: none;
            border: 1px solid gray;
            border-radius: 4px;
            padding: 5px;
            transition: border-color 0.3s ease;
        }
        .font input:focus {
            border-color: #2575fc;
        }

        .form-balance button {
            height: 45px;
            width: 150px;
            background: linear-gradient(45deg, #000000, #2575fc);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            transition: transform 0.2s, box-shadow 0.2s;
            align-self: center;
        }

        .form-balance button:hover {
            background: linear-gradient(45deg, #150d8e, #000000);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
            transform: translateY(-2px);
        }

        .transactiontype {
            display: flex;
            gap: 16px;
            align-items: center;
            justify-content: space-between;
        }

        .List-transaction {
            grid-column: span 1;
            background-color: rgba(255, 255, 255, 0.521);
            color: rgb(252, 252, 252);
            padding: 20px;
            border-radius: 10px;
            max-height: 500px;
            overflow-y: auto;
            margin-top: 10px;
            
        }
        .transaction {
            display: flex;
            background-color: rgb(46, 57, 53);
            border-radius: 16px;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 3px;
            padding: 8px;
            flex-wrap: nowrap;
            width: auto;
            max-height: 40px;
            transition: transform 0.2s ease, background-color 0.2s ease;
            justify-content: space-between;  /* Distribute content */
        }

        .transaction:hover {
            transform: translateY(-2px);
            background-color: rgb(59, 72, 68);
        }

        .transaction .front {
           display: flex;
           gap: 8px;
           align-items: center;
           font-size: 12px;
        }

        .transaction .middle {
           flex: 1;
           display: flex;
           justify-content: center;  /* Center content inside .middle */
           gap: 8px;
           align-items: center;
           font-size: 12px;
        }

        .transaction .end {
           font-size: 10px;
           color: gray;
        }

        #tag {
           background-color: greenyellow;
           padding: 4px 15px;
           border-radius: 8px;
           font-size: 10px;
        }

        .font {
           display: flex;
           gap: 20px;
        }

        .delete-icon {
           cursor: pointer;
           display: none;
        }

        .transaction:hover .delete-icon {
           display: block;
        }



@media (max-width: 768px) {
    .main {
           flex-direction: column;
        }

        .card-balance .more {
           min-width: auto;
           width: 100%;
        }

        .form-balance input, .form-balance button {
           width: 100%;
        }
    }

        .form-row {
           display: flex;
           gap: 16px;
           margin-top: 10px;
        }

        .info-input {
           width: 48%;
           height: 30px;
           background-color: transparent;
           outline: none;
           border: 1px solid gray;
           border-radius: 10px;
           padding: px;
        }

        .amount-selection-row {
           display: flex;
           gap: 20px;
           margin-top: 10px;
        }

        .amount-input {
           width: 0%;
        }

        .select-box {
           width: 50%;
           padding: 10px;
           font-size: 16px;
           border-radius: 40px;
           border: 1px solid rgb(53, 31, 31);
           flex: 1;
           background-color: #010101;
           color: white;
        }

        .select-box option:first-child {
           font-size: 10px;
        }

        .date-input {
           width: 100%;
           font-family: Arial, sans-serif;
           flex: 1;
        }

        .add {
           display: flex;
           gap: 16px;
           margin-top: 20px;
           flex-wrap: wrap;
        }

        .more {  
           height: 100px;
           justify-content: center;
           align-items: center;
           border-radius: 8px;
           flex: 1;
           background-color: #ad9fbe;
           padding: 10px;
           text-align: center;
           box-sizing: border-box;
           display: flex;
        }

        #resetButton {
           border: none;
           color: rgb(5, 5, 5);
           background-color: transparent;
           text-decoration: underline;
           text-decoration-color: red;
        }
        #resetModal {
           display: none;
           position: fixed;
           top: 50%;
           left: 50%;
           transform: translate(-50%, -50%);
           background: rgba(255, 255, 255, 0.9);
           padding: 20px;
           box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
           text-align: center;
           border-radius: 10px;
        }

        #resetModal,
        #confirmResetModal {
           display: none;
           position: fixed;
           top: 50%;
           left: 50%;
           transform: translate(-50%, -50%);
           background: rgba(255, 255, 255, 0.9);
           padding: 20px;
           box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
           text-align: center;
           border-radius: 10px;
        }

    @keyframes glowingBorder {
        0% {
           border-color: #000000;
           box-shadow: 0 0 5px #240790;
        }
        50% {
           border-color: #000000;
           box-shadow: 0 0 20px #240790;
        }
        100% {
           border-color: #000000;
           box-shadow: 0 0 5px #240790;
        }
        }

        .card-balance,
        .form-balance {
           border: 0px solid transparent;
           animation: glowingBorder 5s infinite;
        }
       
    </style>
</head>
<body>
    <div class="appbar">
        <h1>Expense Tracker</h1>
        
    </div>
    <div class="main">
        <div class="left">
            <h1 id="greeting">Good Night</h1>
            <p>Being conscious of your costs is critical. Managing it well will help you achieve your dream.</p>
            <div class="balance">
                <div class="card-balance">
                    <h5>Balance</h5>
                    <h3 id="balance">$ 0</h3>
                </div>
                <div class="card-balance">
                    <h5>Income</h5>
                    <h3 id="income">$ 0</h3>
                </div>
                <div class="card-balance">
                    <h5>Expense</h5>
                    <h3 id="expense">$ 0</h3>
                </div>
            </div>
            <div>   
                <h3>Transactions</h3>
                <div class="List-transaction" id="transactioncontainer"></div>
            </div> 
        </div>
        <div class="right">
            <form onsubmit="submitForm(event)" class="form-balance">
                <div class="amount-selection-row">
                    <input name="amount" type="number" required placeholder="Amount" class="info-input amount-input" />
                    <div class="transactiontype">
                        <select name="transactiontype" class="select-box" required>
                            <option value="" disabled selected>Click Me</option>
                            <option value="Income" style="color: rgb(5, 150, 5);">Income </option>
                            <option value="Expense" style="color: red;">Expense</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <input name="information" type="text" required placeholder="Information" class="info-input" />
                    <input name="date" type="date" required class="date-input" />
                </div>
                <input name="tag" type="text" required placeholder="Tag" class="info-input" />
                <button type="submit">Submit</button>
            </form>
            <div class="add">
                <div class="more">
                    <a href="./description.html">Description</a>
                </div>
                <div class="more">
                    <button id="resetButton"â€‹>Reset</button>
                </div>
                
                <div class="more">
                    <a href="./about_us.html">About Us</a>
                </div>
            </div>
        </div>
    </div>
    <div id="resetModal">
        <p>Do you want to reset your input?</p>
        <button id="confirmFirstReset">Yes</button>
        <button id="cancelReset">No</button>
    </div>
    <div id="confirmResetModal">
        <p>Are you sure?</p>
        <p style="color: red;">You will lose your data, and you cannot restore it back.</p>
        <button id="confirmFinalReset">Yes</button>
        <button id="cancelFinalReset">No</button>
    </div>

    
    <script>
        const transactionContainer = document.getElementById("transactioncontainer");
        const balanceDisplay = document.getElementById("balance");
        const incomeDisplay = document.getElementById("income");
        const expenseDisplay = document.getElementById("expense");
    
        let transactions = JSON.parse(localStorage.getItem("transactions")) || [];
        displayTransactions();
       
        function displayGreeting() {
            const now = new Date();
            const hours = now.getHours();
            let greetingText = "";
            if (hours >= 5 && hours < 12) {
                greetingText = "Good Morning!";
             } else if (hours >= 12 && hours < 17) {
                greetingText = "Good Afternoon!";
            } else if (hours >= 17 && hours < 21) {
                greetingText = "Good Evening!";
            } else {
                greetingText = "Good Night!";
            }
            const greetingElement = document.getElementById("greeting");
            if (greetingElement) {
                greetingElement.innerText = greetingText;
             }
        }
    
        window.addEventListener("load", displayGreeting);
    
        function saveToLocalStorage() {
        localStorage.setItem("transactions", JSON.stringify(transactions));
        }

        // Ensure transactions are displayed when page loads
        window.addEventListener("load", () => { 
        displayTransactions();
        });
    
        function calculateBalance() {
            const income = transactions
                .filter(tx => tx.type === "Income")
                .reduce((sum, tx) => sum + tx.amount, 0);
            const expense = transactions
                .filter(tx => tx.type === "Expense")
                .reduce((sum, tx) => sum + tx.amount, 0);
            const balance = income - expense;
    
            balanceDisplay.textContent = `$ ${balance}`;
            incomeDisplay.textContent = `$ ${income}`;
            expenseDisplay.textContent = `$ ${expense}`;
        }
    
        function displayTransactions() {
            transactionContainer.innerHTML = "";
            transactions.forEach((transaction, index) => {
                const icon = transaction.type === "Income" ? "UP.png" : "down.png";
                const backgroundColor = transaction.type === "Income" ? "green" : "red";
                
                const tagColor = transaction.type === "Income" ? "green" : "red";
    
                transactionContainer.innerHTML += `
                    <div class="transaction" data-index="${index}">
                        <div class="front">
                            <img src="${icon}" alt="${transaction.type}" width="24px" height="24px" />
                            <p>$${transaction.amount}</p>
                        </div>
                        <div class="middle">
                            <p>${transaction.information}</p>
                            <p id="tag" style="background-color: ${tagColor};">${transaction.tag}</p>
                        </div>
                        <div class="end">${transaction.date}</div>
                        <img class="delete-icon" src="delete.png" alt="Delete" width="24px" height="24px"/>
                    </div>
                `;
            });
    
            
            const deleteIcons = document.querySelectorAll(".delete-icon");
            deleteIcons.forEach(icon => {
                icon.addEventListener("click", function(event) {
                    const transactionElement = event.target.closest(".transaction");
                    const index = transactionElement.dataset.index;
    
                    transactions.splice(index, 1);
                    saveToLocalStorage();
    
                    displayTransactions();
                });
            });
    
            calculateBalance();
        }
    
        function submitForm(event) {
            event.preventDefault();
            const form = event.target;
    
            transactions.unshift({
                amount: Number(form.amount.value),
                type: form.transactiontype.value,
                information: form.information.value,
                tag: form.tag.value,
                date: form.date.value,
            });
    
            saveToLocalStorage();
            displayTransactions();
            form.reset();
        }
        
        document.addEventListener("DOMContentLoaded", function () {
        const resetButton = document.getElementById("resetButton");
        const resetModal = document.getElementById("resetModal");
        const confirmReset = document.getElementById("confirmReset");
        const cancelReset = document.getElementById("cancelReset");

        resetButton.addEventListener("click", function () {
            resetModal.style.display = "block";
        });

        cancelReset.addEventListener("click", function () {
            resetModal.style.display = "none";
        });

        confirmReset.addEventListener("click", function () {
            transactions = [];  
            saveToLocalStorage();
            displayTransactions();
            resetModal.style.display = "none";
        });
        });

        function setupResetModal() {
            const elements = {
                resetButton: document.getElementById("resetButton"),
                resetModal: document.getElementById("resetModal"),
                confirmResetModal: document.getElementById("confirmResetModal"),
                confirmFirstReset: document.getElementById("confirmFirstReset"),
                confirmFinalReset: document.getElementById("confirmFinalReset"),
                cancelReset: document.getElementById("cancelReset"),
                cancelFinalReset: document.getElementById("cancelFinalReset"),
            };

            function toggleModal(modal, show) {
                elements[modal].style.display = show ? "block" : "none";
            }

            function resetTransactions() {
                localStorage.setItem("transactions", JSON.stringify([]));
                location.reload();
            }

            elements.resetButton.addEventListener("click", () => toggleModal("resetModal", true));
            elements.cancelReset.addEventListener("click", () => toggleModal("resetModal", false));
            elements.confirmFirstReset.addEventListener("click", () => {
                toggleModal("resetModal", false);
                toggleModal("confirmResetModal", true);
            });
            elements.cancelFinalReset.addEventListener("click", () => toggleModal("confirmResetModal", false));
            elements.confirmFinalReset.addEventListener("click", resetTransactions);
        }

       
        document.addEventListener("DOMContentLoaded", setupResetModal);

    </script>
    
</body>
</html>
