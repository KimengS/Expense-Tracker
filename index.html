<!DOCTYPE html>
<html>
  <head>
    <title>Income and Expense Tracker</title>
    <style>
      body {
        background-color: black;
        color: white;
        margin: 0;
        font-family: Arial, sans-serif;
        gap: 10px;
      }

      #heading {
        color: white;
        height: 70px;
        background-color: gray;
        display: flex;
        align-items: center;
        justify-content: center;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        z-index: 10;
        text-align: left;
      }

      #greeting {
        position: absolute;
        margin-top: -65px;
        margin-left: 5%;
      }

      #quote {
        position: absolute;
        margin-top: 7%;
        margin-left: 5%;
        margin-top: -20px;
      }

      .main-container {
        display: grid;
        grid-template-columns: 1fr 450px;
        grid-template-rows: auto auto;
        gap: 10px; 
        margin-top: 150px;
        padding: 20px;
        margin-left: auto;
        margin-right: auto;
      }

      .tableinfo {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 10px;
        background-color: hwb(0 20% 80%);
        color: rgb(252, 252, 252);
        padding: 30px;
        border-radius: 10px;
        
      }

      .smallborder {
        background-color: rgb(74, 69, 69);
        text-align: center;
        padding: 10px;
        border-radius: 5px;
        max-height: 100px;
      }

      .form-container {
        background-color: hwb(0 20% 80%);
        border-radius: 10px;
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 20px 20px;
        margin-top: 20px;
      }
      .form-container input{
        width: 100%;
        height: 30px;
        background-color: transparent;
        outline: none;
        border: 1px solid gray;
        margin-bottom: 10px;
        align-items: center;
        
      }
      #submit {
        height: 40px;
        background-color: rgb(154, 44, 44);
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        margin: 5px 0;
        align-items: center;
        margin-left:40%;
      }

      #submit:hover {
        background-color: darkgray;
        align-items: center;
      }

      #radio-container {
        display: flex;
        align-items: center;
        gap: 20px;
        
      }
      #radio-container button {
        display: flex;
        width: 100%;
        align-items: center;
        padding: 20px 10px;
        
      }
      #radio-container label {
        display: flex;
        align-items: center;
        font-size: 14px;
        text-align: center;
      }

      .transaction-list {
        grid-column: span 1;
        background-color: hwb(0 20% 80%);
        color: rgb(252, 252, 252);
        padding: 20px;
        border-radius: 10px;
        max-height: 300px;
        overflow-y: auto;
        margin-top: 10px; 
      }

      .transaction-item {
        display: flex;
        justify-content: space-between;
        background: #929090;
        padding: 10px;
        border-radius: 4px;
        margin-bottom: 10px;
        gap: 30px;
      }

      .transaction-item.income {
        border-left: 20px solid #4caf50;
      }

      .transaction-item.expense {
        border-left: 20px solid #e74c3c;
      }

      @media (max-width: 768px) {
        .main-container {
          grid-template-columns: 1fr;
          grid-template-rows: auto;
        }

        .transaction-list {
          grid-column: span 1;
        }
      }

      #aboutus {
        position: fixed;
        bottom: 10%;
        right: 5%;
      }
    </style>
  </head>
  <body>
    <div id="heading">
      <h1>Expense Tracker</h1>
    </div>
    <div>
      <h1 id="greeting"></h1>
      <p id="quote">Being conscious of your costs is critical. Managing it well will help you achieve your dream.</p>
    </div>
    <div class="main-container">
      <!-- Table Section -->
      <div class="tableinfo">
        <div class="smallborder">
          <h3>Balance</h3>
          <p id="balance">&#36;0</p>
        </div>
        <div class="smallborder">
          <h3>Income</h3>
          <p id="income">&#36;0</p>
        </div>
        <div class="smallborder">
          <h3>Expense</h3>
          <p id="expense">&#36;0</p>
        </div>
      </div>

      <!-- Form Section -->
      <div class="form-container">
        <form id="expenseForm">
          <input type="text" id="amount" placeholder="Amount (e.g., 500)" required />
          <div id="radio-container">
            <label>
              <input type="radio" name="tag" value="Income" required />
              Income
            </label>
            <label>
              <input type="radio" name="tag" value="Expense" required />
              Expense
            </label>
          </div>
          <input type="date" id="date" required />
          <input type="text" id="information" placeholder="Information (e.g., utility, salary)" required />
          <button type="submit" id="submit">Submit</button>
        </form>
      </div>

      <!-- Transactions Section -->
      <div class="transaction-list" id="transactionList">
        <h3>Transactions</h3>
      </div>
    </div>

    <footer id="aboutus">
      <a href="./about_us.html">About Us</a>
    </footer>

    <script>
      const balanceElement = document.getElementById("balance");
      const incomeElement = document.getElementById("income");
      const expenseElement = document.getElementById("expense");
      const transactionList = document.getElementById("transactionList");
      const form = document.getElementById("expenseForm");

      let balance = 0;
      let totalIncome = 0;
      let totalExpense = 0;

      function greeting() {
        const now = new Date();
        const hours = now.getHours();
        let greeting;
        if (hours >= 5 && hours < 12) greeting = "Good Morning!";
        else if (hours >= 12 && hours < 17) greeting = "Good Afternoon!";
        else if (hours >= 17 && hours < 21) greeting = "Good Evening!";
        else greeting = "Good Night!";
        document.getElementById("greeting").innerText = greeting;
      }

      window.addEventListener("load", () => {
        greeting();
        const savedData = JSON.parse(localStorage.getItem("expenseTrackerData"));
        if (savedData) {
          balance = savedData.balance;
          totalIncome = savedData.totalIncome;
          totalExpense = savedData.totalExpense;
          updateUI();

          if (savedData.transactions) {
            savedData.transactions.forEach((transaction) => {
              addTransaction(transaction.amount, transaction.date, transaction.information, transaction.tag, false);
            });
          }
        }
      });

      form.addEventListener("submit", (event) => {
        event.preventDefault();
        const amount = parseFloat(document.getElementById("amount").value.trim());
        const date = document.getElementById("date").value.trim();
        const information = document.getElementById("information").value.trim();
        const tag = document.querySelector("input[name='tag']:checked").value;

        if (isNaN(amount) || amount <= 0) {
          alert("Please enter a valid amount greater than 0.");
          return;
        }

        if (tag === "Income") {
          totalIncome += amount;
          balance += amount;
        } else if (tag === "Expense") {
          totalExpense += amount;
          balance -= amount;
        }

        addTransaction(amount, date, information, tag);
        updateUI();
        form.reset();
      });

      function updateUI() {
        balanceElement.innerHTML = `&#36;${balance}`;
        incomeElement.innerHTML = `&#36;${totalIncome}`;
        expenseElement.innerHTML = `&#36;${totalExpense}`;
      }

      function addTransaction(amount, date, information, tag) {
        const transactionItem = document.createElement("div");
        transactionItem.className = `transaction-item ${tag.toLowerCase()}`;
        transactionItem.innerHTML = `
          <span>${tag}: &#36;${amount}</span>
          <span>${information}</span>
          <span>${date}</span>
        `;
        transactionList.appendChild(transactionItem);
      }
    </script>
  </body>
</html>
